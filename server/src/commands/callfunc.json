{"callfunc":{"params":[{"function\"{":"string","argument":"int","...argument":"int"}],"paramDoc":{"function\"{":"Missing Documentation","argument":"Missing Documentation","...argument":"Missing Documentation"},"doc":["This command lets you call up a function NPC. A function NPC can be called","from any script on any map server. Using the 'return' instruction it","will come back to the place that called it.","place,50,50,6%TAB%script%TAB%Woman%TAB%115,{","mes(\"[Woman]\");","mes(\"Lets see if you win\");","callfunc(\"funcNPC\");","mes(\"Well done you have won\");","close();","}","function%TAB%script%TAB%funcNPC%TAB%{",".@win = rand(2);","if (.@win == 0)","return;","mes(\"Sorry you lost\");","end;","}","You can pass arguments to your function - values telling it what exactly","to do - which will be available there with getarg() (see 'getarg').","Notice that returning is not mandatory, you can end execution right there.","If you want to return a real value from inside your function NPC, you","may do so:","place,50,50,6%TAB%script%TAB%Man%TAB%115,{","mes(\"[Man]\");","mes(\"Gimme a number!\");","next();","input(.@number);","if (callfunc(\"OddFunc\", .@number))","mes(\"It's Odd!\");","close();","}","function%TAB%script%TAB%OddFunc%TAB%{","if (getarg(0)%2==0)","return 0;// it's even","return 1;// it's odd","}","Alternately, user-defined functions may be called directly without the use","of the callfunc() script command.","function<TAB>script<TAB>SayHello<TAB>{","mes(\"Hello \" + getarg(0));","return 0;","}","place,50,50,6<TAB>script<TAB>Man<TAB>115,{","mes(\"[Man]\");","SayHello(strcharinfo(PC_NAME));","close();","}","Note:","!! A user-defined function must be declared /before/ a script attempts to","!! call it. That is to say, any functions should be placed above scripts","!! or NPCs (or loaded in a separate file first) before attempting to call","!! them directly."]}}